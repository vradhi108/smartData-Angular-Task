<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <title>Document</title>
</head>
<body>
    <navbar-header></navbar-header>
    <div class="container myform">
        <div class="col-md-6">
            
            <form [formGroup]="form" (ngSubmit)="onClick()" class="form" appBlockCopyPaste>
                
                <div class="container boundary">
                    <div class="mb-3">
                        <label for="firstname" class="form-label">First Name</label> 
                        <input type="text" name="firstname" class="form-control" formControlName="firstname" BlockCopyPasteDirective>
                        <div *ngIf="form.get('firstname')?.invalid && form.get('firstname')?.touched" class="error">
                            This field is required
                        </div>
                    </div>
                    <br>
                    <div class="mb-3">
                        <label for="lastname" class="form-label">Last Name</label> 
                        <input type="text" name="lastname" class="form-control" formControlName="lastname" BlockCopyPasteDirective>
                        <div *ngIf="form.get('lastname')?.invalid && form.get('lastname')?.touched" class="error">
                            This field is required
                        </div>
                    </div>
                    <br>
                    <div class="mb-3">
                        <label for="email" class="form-label">Email</label> 
                        <input type="email" name="email" class="form-control" formControlName="email">
                        <div *ngIf="form.get('email')?.invalid && form.get('email')?.touched" class="error">
                            This field is required or the input is invalid
                        </div>

                        
                    </div>
                    <br>
                    <div class="mb-3">
                        <label for="phonenumber" class="form-label">Phone number</label> 
                        <input type="text" name="phonenumber" pattern="[0-9]*" class="form-control" formControlName="phonenumber">
                        <div *ngIf="form.get('phonenumber')?.invalid && form.get('phonenumber')?.touched" class="error">
                            This field is required or the input is invalid
                        </div>
                    </div>
                    <br>
                    <div class="mb-3">
                        <label for="age" class="form-label">Age</label> 
                        <input type="number" name="age" class="form-control" formControlName="age" min="1">
                        <div *ngIf="form.get('age')?.invalid && form.get('age')?.touched" class="error">
                            This field is required
                        </div>
                    </div>
                    <br>
                    <div class="mb-3">
                        <label for="gender" class="form-label">Gender</label> 
                        <br>
                        <select class="form-control" formControlName="gender">
                            <option value="">Select gender</option>
                            <option value="male">Male</option>
                            <option value="female">Female</option>
                            <option value="other">Other</option>
                        </select>
                        <div *ngIf="form.get('gender')?.invalid && form.get('gender')?.touched" class="error">
                            This field is required
                        </div>
                    </div>
                    <br>
                    <div class="mb-3">
                        <label for="country" class="form-label">Country</label> 
                        <br>
                        
                        <select class="form-control" [(ngModel)]="selectedCountry" (change)="onCountryChange()" formControlName="country">
                            <option value="">Select country</option>
                            <option *ngFor="let country of countries" [value]="country.name">{{country.name}}</option>
                        </select>
                        <div *ngIf="form.get('country')?.invalid && form.get('country')?.touched" class="error">
                            This field is required
                        </div>
                    </div>
                    <br>
                    
                    <div class="mb-3">
                        <label for="state" class="form-label">State</label> 
                        <br>
                        <select class="form-control" [(ngModel)]="selectedState" (change)="onCountryChange()" formControlName="state">
                            <option value="">Select State</option>
                            <option *ngFor="let state of filteredStates" [value]="state">{{state}}</option>
                        </select>
                        <div *ngIf="form.get('state')?.invalid && form.get('state')?.touched" class="error">
                            This field is required
                        </div>
                    </div>
                    <br>
                    <div class="mb-3">
                        <label for="address" class="form-label">Address</label> 
                        <input type="text" name="address" class="form-control" formControlName="address">
                        <div *ngIf="form.get('address')?.invalid && form.get('address')?.touched" class="error">
                            This field is required
                        </div>
                    </div>
                    <div>
                        <label for="password" class="form-label" >Password</label>
                    </div>
                    <div>
                        <div class="input-group mb-3 ">
                            <input type={{passwordType1}} class="form-control position-relative" formControlName="password" BlockCopyPasteDirective (mouseenter)="showPasswordRules = true" (mouseleave)="showPasswordRules = false" formControlName="password" #pw>
                            <div class="input-group-append position-absolute end-0 px-3 py-1">
                                <span *ngIf="visibility1" (click)="toggleVisibility1()" >
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye-fill" viewBox="0 0 16 16">
                                        <path d="M10.5 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0"/>
                                        <path d="M0 8s3-5.5 8-5.5S16 8 16 8s-3 5.5-8 5.5S0 8 0 8m8 3.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7"/>
                                    </svg>
                                </span>
            
                                <span *ngIf="!visibility1" (click)="toggleVisibility1()" >
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye-slash-fill" viewBox="0 0 16 16">
                                        <path d="m10.79 12.912-1.614-1.615a3.5 3.5 0 0 1-4.474-4.474l-2.06-2.06C.938 6.278 0 8 0 8s3 5.5 8 5.5a7 7 0 0 0 2.79-.588M5.21 3.088A7 7 0 0 1 8 2.5c5 0 8 5.5 8 5.5s-.939 1.721-2.641 3.238l-2.062-2.062a3.5 3.5 0 0 0-4.474-4.474z"/>
                                        <path d="M5.525 7.646a2.5 2.5 0 0 0 2.829 2.829zm4.95.708-2.829-2.83a2.5 2.5 0 0 1 2.829 2.829zm3.171 6-12-12 .708-.708 12 12z"/>
                                    </svg>
                                      
                                </span>
                            </div>
                        </div>
        
                        <div *ngIf="form.get('password')?.invalid && form.get('password')?.touched" class="error">
                            This field is required
                        </div>

                        <div class="password-rules" *ngIf="showPasswordRules">
                            Password must be at least 8 characters long, contain at least one uppercase letter, one lowercase letter, one number, and one special character.
                        </div>
                    </div>
                    <br>

                    <div>
                        <label for="confirmPassword" class="form-label">Confirm Password</label>
                    </div>
                    <div>
                        <div class="input-group mb-3 ">
                            <input type={{passwordType2}} class="form-control position-relative" formControlName="confirmPassword" BlockCopyPasteDirective  (mouseenter)="touch = true" #cpw (keyup)="checkPassword(pw.value, cpw.value)">
                            <div class="input-group-append position-absolute end-0 px-3 py-1">
                                <span *ngIf="visibility2" (click)="toggleVisibility2()" >
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye-fill" viewBox="0 0 16 16">
                                        <path d="M10.5 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0"/>
                                        <path d="M0 8s3-5.5 8-5.5S16 8 16 8s-3 5.5-8 5.5S0 8 0 8m8 3.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7"/>
                                    </svg>
                                </span>
            
                                <span *ngIf="!visibility2" (click)="toggleVisibility2()" >
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye-slash-fill" viewBox="0 0 16 16">
                                        <path d="m10.79 12.912-1.614-1.615a3.5 3.5 0 0 1-4.474-4.474l-2.06-2.06C.938 6.278 0 8 0 8s3 5.5 8 5.5a7 7 0 0 0 2.79-.588M5.21 3.088A7 7 0 0 1 8 2.5c5 0 8 5.5 8 5.5s-.939 1.721-2.641 3.238l-2.062-2.062a3.5 3.5 0 0 0-4.474-4.474z"/>
                                        <path d="M5.525 7.646a2.5 2.5 0 0 0 2.829 2.829zm4.95.708-2.829-2.83a2.5 2.5 0 0 1 2.829 2.829zm3.171 6-12-12 .708-.708 12 12z"/>
                                    </svg>
                                      
                                </span>
                            </div>
                        </div>
                        <div *ngIf="form.get('confirmPassword')?.invalid && form.get('confirmPassword')?.touched" class="error">
                            This field is required
                        </div>
                        <div *ngIf="!isPasswordCorrect && isPasswordFilled" class="error">Password didn't match</div>
                       
                    </div>
                    <div>
                        <p>Already have an account? <a [routerLink]="['/login']">LogIn</a> </p>
                    </div>
                    <div *ngIf="invalid" >
                        <h3 class="error">
                            Enter Valid Details
                        </h3>
                    </div>
                    <div class="button-center">
                        <button  class="btni btn btn-success" type="submit">Create Account</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</body>
</html>